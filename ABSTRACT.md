# 卒業研究 要旨

## 1. はじめに
Webの普及初期を支えたHTTP/1.1は、テキストベース設計とKeep-Aliveで互換性と実装容易性を担保してきた一方、往復回数の多さやヘッダ冗長、パイプライニング時のヘッドオブラインブロッキング（HoLB）が性能上の制約となってきた。これを受けたHTTP/2は、TCP上でのバイナリフレーミング、HPACKによるヘッダ圧縮、ストリーム多重化により効率化を実現し、現在のWeb基盤で標準的に運用されている。ただし、損失発生時の再送は接続単位で波及し、無線や移動体などロス・遅延が大きい環境では性能劣化が顕在化する。次世代であるHTTP/3はUDP上のQUICを基盤とし、TLS 1.3の内包、ストリーム単位の損失分離、0‑RTT再接続、Connection IDによる経路変更耐性により、モバイルや混雑ネットワークでの体感改善が期待される。本研究はこの社会的背景のもと、現実的なネットワーク条件でHTTP/2とHTTP/3の性能特性を俯瞰し、プロトコル選択の指針を与えることを目的とする。

## 2. 関連技術
### 2.1 HTTP/2
HTTP/2はTCP上で動作するバイナリフレーミングのアプリケーション層プロトコルであり、単一接続上に複数のストリームを多重化し、HPACKによるヘッダ圧縮で帯域効率を高める。優先度制御やサーバプッシュによりページロード最適化が可能となる一方、パケットロス時の再送は接続単位で連鎖し、HoLBの影響が残る。固定網など低ロス・低遅延環境では安定して高性能を発揮し、運用の成熟度も高い。

### 2.2 HTTP/3（QUIC）
HTTP/3はUDP上のQUICを輸送層とし、暗号化（TLS 1.3）を内包してセキュリティとトランスポートを統合する。ストリーム単位で損失を分離することでロス時の波及遅延を抑制し、0‑RTTやConnection IDにより再接続・経路変更に強い。モバイルや高遅延・高ロス環境での利点が期待される一方、実装差やCPU負荷、ミドルボックスのUDP取り扱いなど運用上の検討点も残る。

### 2.3 Nginx と quiche（HTTP/3実装）
Nginxは広く用いられる高性能Webサーバであり、Cloudflareのquiche（Rust実装のQUIC/HTTP/3スタック）と組み合わせてHTTP/2とHTTP/3を同一サーバで提供できる。Alt‑SvcによりクライアントにHTTP/3を告知しつつHTTP/2フォールバックを維持する段階的移行が容易で、ワーカ数やバッファ、送受信キューのチューニングがレイテンシ・スループットに直結する。

### 2.4 ベンチマークツール（h2load, curl, quiche-client）
h2loadはHTTP/2/3の負荷生成と統計取得に適したツールで、接続・ストリーム・リクエスト数を制御して再現性の高い比較を行える。curlは疎通やALPN・TLSハンドシェイクの確認、簡易計測に有用で、`--http3`等により挙動を確認できる。quiche-clientはHTTP/3スタック寄りの詳細観測に適し、実装レベルのログで原因分析を支援する。

## 3. 関連研究
既存研究は、高遅延・高ロス環境でHTTP/3がHTTP/2に優位となる傾向や、固定網では差が小さい場合があること、さらにCPU性能や実装差が性能に影響する点を示している。一方で、仮想化（コンテナ）と実機を跨いだ再現性ある比較、ならびに現実的なネットワーク条件を系統的に掃引した評価は限定的である。

## 4. 研究目的・方法
本研究は、再現性の高い評価基盤上でHTTP/2とHTTP/3の性能特性を実測し、プロトコル選択の指針を提示することを目的とする。具体的には、Docker Composeで構築したクライアント・ルーター・サーバの3ノード構成を用い、ルーター上のtc/netemにより遅延（0/75/150/225ms）とパケットロス（3%）を制御する。サーバはNginx + quicheによりHTTP/2/HTTP/3を同時提供し、クライアントからh2load等で大量リクエスト（ウォームアップと測定を分離）を送出して、応答時間・スループットなどの指標を取得する。あわせて、Raspberry Pi 5実機サーバを用いた実環境評価を行い、仮想化環境との差異も観察する。

## 5. 結果と考察（要約）
代表的な遅延・ロス条件下で比較した結果、固定網に近い低遅延・低ロス条件ではHTTP/2が安定して高い効率を示す一方、ロスや遅延が増大する条件ではHTTP/3の損失分離や再接続特性が有利に働く局面が確認された。さらに、実機（Raspberry Pi 5）ではCPU負荷や実装差の影響が現れやすく、仮想化環境との性能差が観測された。これらはプロトコル選択がネットワーク条件と実装環境に強く依存することを示唆する。

## 6. 貢献
（1）Dockerと実機を跨ぐ再現性の高い評価基盤を構築し、HTTP/2/HTTP/3を同一条件で比較できるようにした。（2）遅延・ロス条件を系統的に掃引し、プロトコルごとの得意・不得意領域を整理した。（3）運用観点（チューニング、フォールバック戦略）に基づく実践的な示唆を提示した。

## 7. まとめ
本研究は、現実的なネットワーク条件と実装環境を踏まえてHTTP/2とHTTP/3の性能特性を実測し、利用シナリオ別の選択指針を与えた。今後はgRPCワークロードや帯域制限・ジッタ等の条件拡張、統計的有意性検定の導入により、さらなる一般化を図る。

## キーワード
HTTP/2、HTTP/3、QUIC、Nginx、quiche、h2load、ネットワークエミュレーション、Raspberry Pi、Docker、再現性評価


